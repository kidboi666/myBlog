generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model category {
  id                                       BigInt         @id @default(autoincrement())
  name                                     String         @unique
  icon                                     String?
  post_post_parent_category_idTocategory   post[]         @relation("post_parent_category_idTocategory")
  post_post_parent_category_nameTocategory post[]         @relation("post_parent_category_nameTocategory")
  sub_category                             sub_category[]
}

model post {
  name                                         String
  content                                      String
  image                                        String?
  created_at                                   DateTime      @default(now())
  id                                           BigInt        @id @default(autoincrement())
  sub_category_id                              BigInt?
  sub_category_name                            String?
  parent_category_id                           BigInt
  parent_category_name                         String
  tags                                         String[]
  sub_category                                 sub_category? @relation(fields: [sub_category_id], references: [id], onDelete: NoAction, onUpdate: NoAction, map: "post_category_id_fkey")
  category_post_parent_category_idTocategory   category      @relation("post_parent_category_idTocategory", fields: [parent_category_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
  category_post_parent_category_nameTocategory category      @relation("post_parent_category_nameTocategory", fields: [parent_category_name], references: [name], onDelete: NoAction, onUpdate: NoAction)
}

/// This model contains row level security and requires additional setup for migrations. Visit https://pris.ly/d/row-level-security for more info.
model sub_category {
  id                 BigInt   @id @default(autoincrement())
  created_at         DateTime @default(now()) @db.Timestamptz(6)
  name               String
  parent_category_id BigInt
  post               post[]
  category           category @relation(fields: [parent_category_id], references: [id], onDelete: NoAction, onUpdate: NoAction)
}
